var app=angular.module("app",[]);app.config(["$sceProvider","$controllerProvider","$provide","$sceDelegateProvider",function(f,d,g,a){a.resourceUrlWhitelist("self http://static.thorin-games.tk/** https://thorin-apps.tk/** https://real-timer.tk/** http://real-timer.tk/** https://ruter.no/**".split(" "));f.enabled(!0);app.controller=function(a,e){d.register(a,e);return this}}]);
app.controller("masterCtrl",["$http","$chttp","$timeout",function(f,d,g){var a=this;a.css="";a.jqLoaded=!1;a.status="Lokaliserer\u2026";a.success=!1;a.errors={unknown:!1,position:!1};a.data=[];a.coords=[0,0];a.conv=d.get("assets/converter.min.js").then(function(a){eval(a)})["catch"](function(c,b){console.log(c,b);a.error=!0});f=function(c){a.errors.position=!1;a.conv.then(function(){a.coords=convert(c.coords.latitude,c.coords.longitude);a.status="Laster inn data\u2026";console.log(a.coords);d.get("//real-timer.tk/cors/cors.php?url=reisapi.ruter.no%2FPlace%2FGetClosestPlacesExtension%3Fcoordinates%3Dx%3D"+
Math.round(a.coords[0])+"%2Cy%3D"+Math.round(a.coords[1])+"%26proposals%3D12",0).then(function(b){a.success=!0;a.data=b;for(b=0;b<a.data.length;b++)if(a.data[b].expanded=!1,a.data[b].hasExpanded=!1,a.data[b].height="25px","Area"==a.data[b].PlaceType)for(var c=0;c<a.data[b].Stops.length;c++)a.data[b].Stops[c].expanded=!1,a.data[b].hasExpanded=!1,a.data[b].Stops[c].height="25px"})["catch"](function(){a.status="Kunne ikke laste inn data."})});g(function(){navigator.geolocation.clearWatch(a.wpid)},5E3)};
var h=function(){console.log("Couldn't get position");a.status="Fikk ikke tilgang til stedstjenester";a.errors.position=!0},e={enableHighAccuracy:!1,maximumAge:3E4,timeout:2500};"geolocation"in navigator?a.wpid=navigator.geolocation.watchPosition(f,h,e):(a.status="Fikk ikke tilgang til stedstjenester",a.errors.position=!0);a.toggle=function(c,b){"undefined"===typeof b?(a.data[c].expanded=!a.data[c].expanded,a.data[c].hasExpanded=!0):(a.data[c].Stops[b].expanded=!a.data[c].Stops[b].expanded,a.data[c].Stops[b].hasExpanded=
!0)};d.get("assets/glyphicons.min.css").then(function(c){a.css+=c},0);d.get("//static.thorin-games.tk/css/ubuntu.php").then(function(c){a.css+=c},0);a.jq=d.get("https://code.jquery.com/jquery-3.1.1.min.js");a.jq.then(function(c){eval(c);a.jqLoaded=!0;c=window.addEventListener?"addEventListener":"attachEvent";(0,window[c])("attachEvent"==c?"onmessage":"message",function(b){if("string"===typeof b.data&&-1<b.data.indexOf(",")){var c=b.data.split(",")[0],e=b.data.split(",")[1]+"px";for(b={i:0};b.i<a.data.length;b=
{i:b.i},b.i++)if(a.data[b.i].ID==c)g(function(b){return function(){a.data[b.i].height=e}}(b),0);else if("Area"==a.data[b.i].PlaceType)for(var d={j:0};d.j<a.data[b.i].Stops.length;d={j:d.j},d.j++)a.data[b.i].Stops[d.j].ID==c&&g(function(b,c){return function(){a.data[b.i].Stops[c.j].height=e}}(b,d),0)}},!1)})}]);
app.service("$chttp",["$http","$q","$timeout",function(f,d,g){this.get=function(a,h,e){var c=d.defer(),b=!1;"undefined"===typeof e&&(e={});e.timeout=c.promise;e=f.get(a,e);e.success(function(d){if("undefined"!==typeof Storage)try{localStorage[a]=JSON.stringify(d)}catch(k){console.log("Couldn't save "+a+"-data to storage even though storage exists. Error:",k)}c.resolve(d);b=!0});e.error(function(d,e){"undefined"!==typeof Storage&&a in localStorage?(c.resolve(JSON.parse(localStorage[a])),b=!0):c.reject("ERROR")});
"undefined"!==typeof h&&g(function(){!b&&"undefined"!==typeof Storage&&a in localStorage&&c.resolve(JSON.parse(localStorage[a]))},h);return c.promise}}]);app.value("version",12);var b=Math;window.convert=function(m,l){var d=m/180*b.PI,g,e,k,c,h,f=[];e=(b.pow(6378137,2)-b.pow(6356752.314,2))/b.pow(6356752.314,2)*b.pow(b.cos(d),2);g=b.pow(6378137,2)/(6356752.314*b.sqrt(1+e));k=b.tan(d);c=k*k;h=l/180*b.PI-(-183+6*(b.floor((l+180)/6)+1))/180*b.PI;f[0]=g*b.cos(d)*h+g/6*b.pow(b.cos(d),3)*(1-c+e)*b.pow(h,3)+g/120*b.pow(b.cos(d),5)*(5-18*c+c*c+14*e-58*c*e)*b.pow(h,5)+g/5040*b.pow(b.cos(d),7)*(61-479*c+179*c*c-c*c*c)*b.pow(h,7);f[1]=6367444.657*(1+b.pow(.0016792204056685965,2)/4+b.pow(.0016792204056685965,4)/
64)*(d+(-.002518830608502895+9*b.pow(.0016792204056685965,3)/16+-3*b.pow(.0016792204056685965,5)/32)*b.sin(2*d)+(15*b.pow(.0016792204056685965,2)/16+-15*b.pow(.0016792204056685965,4)/32)*b.sin(4*d)+(-35*b.pow(.0016792204056685965,3)/48+105*b.pow(.0016792204056685965,5)/256)*b.sin(6*d)+315*b.pow(.0016792204056685965,4)/512*b.sin(8*d))+k/2*g*b.pow(b.cos(d),2)*b.pow(h,2)+k/24*g*b.pow(b.cos(d),4)*(5-c+9*e+4*e*e)*b.pow(h,4)+k/720*g*b.pow(b.cos(d),6)*(61-58*c+c*c+270*e-330*c*e)*b.pow(h,6)+k/40320*g*b.pow(b.cos(d),
8)*(1385-3111*c+543*c*c-c*c*c)*b.pow(h,8);f[0]=.9996*f[0]+5E5;f[1]*=.9996;0>f[1]&&(f[1]+=1E7);return f};
